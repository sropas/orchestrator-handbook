# รายงานความคืบหน้า — ทีม n8n-local (2024-06-11)

## ภาพรวมระบบ
- Docker Compose stack ขึ้นครบ (Postgres + pgvector, FastAPI RAG service, n8n)
- หน้า `/ask`, `/upload`, `/docs` ใช้งานได้บน http://localhost:8000 และ n8n เปิดได้ที่ http://localhost:5678
- Postgres ใช้ image `pgvector/pgvector:pg16` มี extension vector พร้อม

## Backend Engineer
- ทดสอบ ingest ผ่าน `/upload` แล้วเจอ latency สูงเมื่อไม่มี `OPENAI_API_KEY`; แนะนำตั้งค่า `.env` ให้ครบหรือใช้ `EMBEDDING_PROVIDER=sentence-transformers`
- ปรับโค้ดให้ไม่ใช้ชื่อฟิลด์สงวน (`metadata`) และย้าย `BaseSettings` ไปใช้ `pydantic-settings`
- คิวงานถัดไป: เพิ่ม unit tests สำหรับ `chunk_text`, `rag.upsert`, `rag.query`

## Frontend Engineer
- ตรวจสอบหน้า `/ask` และ `/upload` ว่า responsive และแสดงข้อความ error/ success แล้ว
- TODO: เพิ่ม favicon และ feedback ขณะอัปโหลด (loading indicator) เพื่อให้ผู้ใช้รู้ว่ากำลังประมวลผล

## Database Engineer
- ตรวจสอบ schema `documents`, `chunks` พร้อม index; ยังต้องจูนค่า `IVFFLAT lists` ตามขนาดข้อมูลจริง
- สร้าง checklist สำหรับ backup (`pg_dump`) และ vacuum schedule เพื่ออัปเดตใน sprint ถัดไป

## DevOps Engineer
- ยืนยัน build ผ่าน `docker compose up -d --build`; log เงียบ ไม่มี error หลังแก้ image Postgres
- เตรียมให้ทีมใช้ CI workflow `.github/workflows/ci.yml`; รอ push ไป repo remote

## QA/Test
- Smoke test (manual) ผ่านแล้ว: `/health`, `/ask`, `/upload` (ไฟล์ PDF ขนาดเล็ก ~100KB)
- ต้องบันทึกผลพร้อมเวลาใน `docs/orchestrator/test-plan.md` และเตรียมชุด pytest automation สัปดาห์หน้า

## Document & Paper Owner
- อัปเดต `docs/runbook.md` (เพิ่มบันทึกใน “Next Session Notes”) ว่าระบบพร้อมทดสอบแล้ว
- จัดเก็บ log meeting นี้ใน `docs/orchestrator/meeting-summary.md`

## Infra Manager
- ยืนยันว่าสามารถสลับจาก Docker Compose ไป Kubernetes ผ่าน manifests ใน `infra/k8s/`
- TODO: ทำ sizing สำหรับ VM จริง (CPU/RAM/Disk) และเตรียม firewall rule/ reverse proxy plan

## Security Manager
- ตรวจว่า `.env` อยู่ใน .gitignore; แนะนำตั้งค่า API key เฉพาะสภาพ dev, ปิดไฟล์ upload `.pdf` เท่านั้น
- ต้องอัปเดตตาราง OWASP/PDPA ว่าระบบขึ้นใน network ปิดแล้วและยังไม่มี TLS (ต้องวางแผนขั้นถัดไป)

## PM / SA
- เปิด issue ให้ทุกบทบาท tick รายการใน WBS Week 1 → เสร็จสมบูรณ์
- สัปดาห์ถัดไป focus: เพิ่ม tests, integrate n8n flow ตัวอย่าง (`examples/n8n_notes.txt`), ทำ security hardening

## Next Steps สรุป
1. เติมค่า `.env` ที่จำเป็น (OPENAI_API_KEY, EMBEDDING_PROVIDER) แล้วทดสอบ ingest/query ขนาดใหญ่
2. เริ่มเขียน unit/integration tests ตามแผน test pyramid ใน `docs/orchestrator/test-plan.md`
3. เตรียม repo Git remote และเปิด PR template (`docs/orchestrator/pr-template.md`) ให้ทีมใช้งานจริง

## Real Data Validation Memo
- Namespace: prod_validation
- Chunk count: 6 (2025-10-18 19:07:04 UTC → 19:09:45 UTC)
- Embedding provider: openai (API key จาก `.env`)
- หมายเหตุ Proxy/Network: container ออกเน็ตโดยตรง (เช็กผ่าน `curl -I https://www.google.com`)
- Action items: QA บันทึก latency 5 คำถาม, Security เก็บหลักฐาน approve, Backend ติดตามค่ารอบต่อไป
